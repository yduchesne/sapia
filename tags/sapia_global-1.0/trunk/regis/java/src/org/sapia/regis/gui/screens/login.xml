<gumby:New class="JDialog" xmlns:swing="java:swing"
  xmlns:gumby="gumby:swing">
  <arg type="java.awt.Frame">
    <value>
      <gumby:Ref id="FRAME:widgets" />
    </value>
  </arg>  
  <arg>
    <value>
      <gumby:String value="Regis Admin Login" />
    </value>
  </arg>    
  
  <gumby:Register id="LOGIN_DIALOG:widgets" />
    
  <gumby:TablePanel>
    <tr>
      <td colspan="2">
        <swing:JPanel>
          <swing:JLabel text="Please enter the required information" />          
        </swing:JPanel>
      </td>
    </tr>        
    <tr>
      <td weight="0.5">
        <swing:Insets top="10" left="10" right="10" bottom="10" />
        <swing:JLabel text="Username" />
      </td>
      <td weight="0.5">
        <swing:Insets top="10" left="10" right="10" bottom="10" />
        <swing:JTextField columns="15">
          <gumby:Register id="username:login" />        
        </swing:JTextField>
      </td>
    </tr>
    <tr>
      <td weight="0.5">
        <swing:Insets top="10" left="10" right="10" bottom="10" />
        <swing:JLabel text="Password" />
      </td>
      <td weight="0.5">
        <swing:Insets top="10" left="10" right="10" bottom="10" />
        <swing:JTextField columns="15">
          <gumby:Register id="password:login" />        
        </swing:JTextField>
      </td>
    </tr>    
    <tr>
      <td weight="0.5">
        <swing:Insets top="10" left="10" right="10" bottom="10" />
        <swing:JLabel text="Host" />
      </td>
      <td weight="0.5">
        <swing:Insets top="10" left="10" right="10" bottom="10" />
        <swing:JTextField columns="15">
          <gumby:Register id="host:login" />        
        </swing:JTextField>
      </td>
    </tr>        
    <tr>
      <td weight="0.5">
        <swing:Insets top="10" left="10" right="10" bottom="10" />
        <swing:JLabel text="Port" />
      </td>
      <td weight="0.5">
        <swing:Insets top="10" left="10" right="10" bottom="10" />
        <swing:JTextField columns="15">
          <gumby:Register id="port:login" />        
        </swing:JTextField>
      </td>
    </tr>        
    <tr>
      <td weight="0.5">
        <swing:Insets top="10" left="10" right="10" bottom="10" />
        <swing:JLabel text="JNDI Name" />
      </td>
      <td weight="0.5">
        <swing:Insets top="10" left="10" right="10" bottom="10" />
        <swing:JTextField columns="15">
          <gumby:Register id="jndiName:login" />        
        </swing:JTextField>
      </td>
    </tr>        
    <tr>
      <td colspan="2">
        <swing:JPanel>
          <swing:JButton text="OK">      
            <actionListener>
              <gumby:Proxy implements="java.awt.event.ActionListener">
                <method name="actionPerformed">
                  import org.sapia.regis.gui.GlobalContext;
                  
                  login = RenderContext.getEnv().acquire("LOGIN_DIALOG", "widgets");
                  login.dispose();
                  jndiName = RenderContext.getEnv().acquire("jndiName", "login").getText();
                  host = RenderContext.getEnv().acquire("host", "login").getText();                  
                  port = RenderContext.getEnv().acquire("port", "login").getText();                  
                  username = RenderContext.getEnv().acquire("username", "login").getText();
                  password = RenderContext.getEnv().acquire("password", "login").getText();
                  if(port == null || port.trim().length() == 0){
                    port = "0";
                  }
                  GlobalContext.getInstance().login(username, password, host, Integer.parseInt(port), jndiName);
                  frame     = RenderContext.getEnv().acquire("FRAME", "widgets");
                  splitPane = org.sapia.regis.gui.GuiUtils.render(RenderContext, "nodetree");                  
                  splitPane.setDividerLocation(200);
                  menuBar   = org.sapia.regis.gui.GuiUtils.render(RenderContext, "menubar");                  
                  frame.getContentPane().add(splitPane, java.awt.BorderLayout.CENTER);
                  frame.setJMenuBar(menuBar);
                </method>
              </gumby:Proxy>  
            </actionListener>                          
          </swing:JButton>
          <swing:JButton text="Cancel">
            <actionListener>
              <gumby:Proxy implements="java.awt.event.ActionListener">
                <method name="actionPerformed">
                  frame = RenderContext.getEnv().acquire("FRAME", "widgets");
                  login = RenderContext.getEnv().acquire("LOGIN_DIALOG", "widgets");
                  login.dispose();
                  frame.dispose();
                  System.exit(0);                  
                </method>
              </gumby:Proxy>  
            </actionListener>            
          </swing:JButton>
        </swing:JPanel>
      </td>
    </tr>      
  </gumby:TablePanel>

  <windowListener>
    <gumby:Proxy implements="java.awt.event.WindowListener">
      <method name="windowClosing">
        frame = RenderContext.getEnv().acquire("FRAME", "widgets");
        login = RenderContext.getEnv().acquire("LOGIN_DIALOG", "widgets");
        login.dispose();
        frame.dispose();
        System.exit(0);        
      </method>
    </gumby:Proxy>  
  </windowListener>
  
</gumby:New>