<swing:JSplitPane xmlns:swing="java:swing" xmlns:awt="java:awt"
  xmlns:gumby="gumby:swing">

  <oneTouchExpandable>true</oneTouchExpandable>
  <leftComponent>
    <swing:JScrollPane xmlns:swing="java:swing"
                       xmlns:gumby="gumby:swing">
      <viewportView>                 
        <gumby:Expr>
          <![CDATA[
           import org.sapia.regis.gui.model.ModelUtils;
           return ModelUtils.buildTree();
    
         ]]>
        </gumby:Expr>
      </viewportView> 
      <verticalScrollBarPolicy>
        <gumby:Constant name="ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED" />
      </verticalScrollBarPolicy>  
      <horizontalScrollBarPolicy>
        <gumby:Constant name="ScrollPaneConstants.HORIZONTAL_SCROLLBAR_AS_NEEDED" />
      </horizontalScrollBarPolicy>        
    </swing:JScrollPane>
  </leftComponent>
  <rightComponent>
    <swing:JScrollPane xmlns:swing="java:swing"
                       xmlns:gumby="gumby:swing">
      <viewportView>                 
        <swing:JTabbedPane xmlns:swing="java:swing"
          xmlns:gumby="gumby:swing">
          
          <gumby:Register id="TABBED_PANE:widgets" />      
          
          <changeListener>
            <gumby:Expr>
              import javax.swing.event.*; 
              import org.sapia.gumby.event.*;
              import org.sapia.regis.gui.event.*;
              import org.sapia.regis.gui.task.*;
                        
              new ChangeListener(){
                public void stateChanged(ChangeEvent e){
                  tabbedPane = e.getSource();
                  selected = tabbedPane.getSelectedComponent();
                  tabIndex = tabbedPane.indexOfComponent(selected);
                  if(tabIndex == 1){
                     EventManager.getInstance().dispatchEvent(new NewNodeSelectionEvent());
                  };
                }
              };
            </gumby:Expr>   
          </changeListener>   
          
          <!-- ============= current node tab ============= -->
                
          <tab title="current node">
            <gumby:New class="JPanel">
              <gumby:Expr void="true">
                import java.awt.FlowLayout; Parent.setLayout(new
                FlowLayout(FlowLayout.LEFT));
              </gumby:Expr>
              <gumby:TablePanel>
                <tr>
                  <td colspan="2">
                    <swing:JLabel>
                      <text>/</text>
                      <gumby:Register id="NODE_PANE_TITLE:widgets" />
                    </swing:JLabel>
                  </td>          
                </tr>
                <tr>
                  <td colspan="2">
                    <gumby:New
                      class="org.sapia.regis.gui.widgets.NodePanel">
                      <gumby:Register id="NODE_PANE:widgets" />
                    </gumby:New>
                  </td>
                </tr>
                <tr>
                  <td>
                    <gumby:New class="JPanel">
                      <gumby:Expr void="true">
                        import java.awt.FlowLayout; Parent.setLayout(new
                        FlowLayout(FlowLayout.CENTER));
                      </gumby:Expr>
                      <swing:JButton text="Add Property">
                        <actionListener>
                          <gumby:Expr>
                            import java.awt.event.*; 
                            import org.sapia.regis.gui.*;
                            import org.sapia.regis.gui.event.*;                        
                            import org.sapia.regis.gui.widgets.*;                        
                            
                            new ActionListener(){
                              actionPerformed(ActionEvent e){                        
                                dialog = new NewPropertyDialog(false);
                                dialog.pack();
                                GuiUtils.centerToScreen(dialog);                            
                                dialog.setVisible(true);                        
                              }
                            };
                          </gumby:Expr>
                        </actionListener>
                      </swing:JButton>                                    
                      <swing:JButton text="Apply">
                        <actionListener>
                          <gumby:Expr><![CDATA[
                            import java.awt.event.*; 
                            import org.sapia.regis.gui.*;
                            import org.sapia.regis.gui.event.*;                        
                            import org.sapia.regis.gui.task.*;
                            
                            new ActionListener(){ 
                              public void actionPerformed(ActionEvent e){
    
                                task = new Task(){
                                         public void execute(){
                                            GlobalContext.getInstance() 
                                              .getModelManager().getNodeModel().update();                                  
                                         }
                                       };
                                
                                GlobalContext.getInstance().dispatchTask(task);
                              }
                            };
                            ]]>
                          </gumby:Expr>
                        </actionListener>
                      </swing:JButton>
                    </gumby:New>
                  </td>
                </tr>
              </gumby:TablePanel>
            </gumby:New>
          </tab>
          
          <!-- ============= new node tab ============= -->
          
          <tab title="new node">
            <gumby:New class="JPanel">
              <gumby:Expr void="true">
                import java.awt.FlowLayout; Parent.setLayout(new
                FlowLayout(FlowLayout.LEFT));
              </gumby:Expr>
              <gumby:TablePanel>
                <tr>
                  <td colspan="2">
                    <gumby:New class="JPanel">
                      <gumby:Expr void="true">
                        import java.awt.FlowLayout; Parent.setLayout(new
                        FlowLayout(FlowLayout.LEFT));
                      </gumby:Expr>              
                      <swing:JLabel>
                        <gumby:Register id="NEW_NODE_PANE_TITLE:widgets" />
                      </swing:JLabel>
                      <swing:JTextField columns="15">
                        <gumby:Register id="NEW_NODE_PANE_NAME:widgets" />
                      </swing:JTextField>                
                    </gumby:New>
                  </td>          
                </tr>          
                <tr>
                  <td colspan="2">
                    <gumby:New
                      class="org.sapia.regis.gui.widgets.NewNodePanel">
                      <gumby:Register id="NEW_NODE_PANE:widgets" />
                    </gumby:New>
                  </td>
                </tr>
                <tr>
                  <td>
                    <gumby:New class="JPanel">
                      <gumby:Expr void="true">
                        import java.awt.FlowLayout; Parent.setLayout(new
                        FlowLayout(FlowLayout.CENTER));
                      </gumby:Expr>
                      <swing:JButton text="Add Property">
                        <actionListener>
                        
                          <gumby:Expr>
                            import org.sapia.regis.gui.widgets.*;
                            import org.sapia.regis.gui.*;                        
                            
                            new ActionListener(){
                              actionPerformed(ActionEvent e){                        
                                dialog = new NewPropertyDialog(true);
                                dialog.pack();
                                GuiUtils.centerToScreen(dialog);                            
                                dialog.setVisible(true);                        
                              }
                            };
                          </gumby:Expr>
                        </actionListener>
                      </swing:JButton>                  
                      <swing:JButton text="Create">
                        <actionListener>
                          <gumby:Expr><![CDATA[
                            import java.awt.event.*; 
                            import org.sapia.regis.gui.*;
                            import org.sapia.regis.gui.event.*;                        
                            import org.sapia.regis.gui.task.*;                        
                            
                            new ActionListener(){ 
                              public void actionPerformed(ActionEvent e){
                              
                                task = new Task(){
                                         public void execute(){
                                            GlobalContext.getInstance() 
                                              .getModelManager().getNewNodeModel().create();                                  
                                         }
                                       };
                              
                                GlobalContext
                                  .getInstance().dispatchTask(task);
                              }
                            };
                            ]]>
                          </gumby:Expr>
                        </actionListener>
                      </swing:JButton>                  
                    </gumby:New>
                  </td>
                </tr>
              </gumby:TablePanel>
            </gumby:New>
          </tab>
        </swing:JTabbedPane>

      </viewportView> 
      <verticalScrollBarPolicy>
        <gumby:Constant name="ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED" />
      </verticalScrollBarPolicy>  
      <horizontalScrollBarPolicy>
        <gumby:Constant name="ScrollPaneConstants.HORIZONTAL_SCROLLBAR_AS_NEEDED" />
      </horizontalScrollBarPolicy>        
    </swing:JScrollPane>  

  </rightComponent>

</swing:JSplitPane>

