<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">
           
  <bean id="org.sapia.CorusModuleLifeCycleManager" class="org.sapia.CorusModuleLifeCycleManager" />

  <!-- ============ DB ============ -->

  <bean id="org.sapia.corus.db.DbModule" 
        class="org.sapia.corus.db.DbModuleImpl" 
        scope="singleton">
  </bean>

  <!-- ============ CONFIGURATOR ============ -->

  <bean id="org.sapia.corus.admin.services.configurator.Configurator" 
        class="org.sapia.corus.configurator.ConfiguratorImpl"
        scope="singleton">
  </bean>
  
  <!-- ============ TASK MANAGER ============ -->
  

  <bean id="org.sapia.corus.taskmanager.CorusTaskManager" 
        class="org.sapia.corus.taskmanager.CorusTaskManagerImpl" 
        scope="singleton">
  </bean>

  <!-- ============ EVENT DISPATCHER ============ -->

  <bean id="org.sapia.corus.event.EventDispatcher" 
        class="org.sapia.corus.event.EventDispatcherImpl" 
        scope="singleton">
  </bean>

  <!-- ============ HTTP ============ -->

  <bean id="org.sapia.corus.http.HttpModule" 
        class="org.sapia.corus.http.HttpModuleImpl" 
        scope="singleton">
  </bean>

  <!-- ============ PORTS ============ -->
  
  <bean id="org.sapia.corus.admin.services.port.PortManager" 
        class="org.sapia.corus.port.PortManagerImpl" 
        scope="singleton">
  </bean>
  
  <!-- ============ DEPLOYER ============ -->

  <bean id="deployer.tempDir"   class="org.sapia.corus.util.PropertyImpl" p:name="corus.server.tmp.dir" />
  <bean id="deployer.deployDir" class="org.sapia.corus.util.PropertyImpl" p:name="corus.server.deploy.dir" />
  
  <bean id="deployer.configuration" class="org.sapia.corus.admin.services.deployer.DeployerConfiguration">
    <property name="tempDir"   ref="deployer.tempDir" />
    <property name="deployDir" ref="deployer.deployDir" />
  </bean>
  
  <bean id="org.sapia.corus.admin.services.deployer.Deployer" 
        class="org.sapia.corus.deployer.DeployerImpl" 
        scope="singleton">
    <property name="configuration">
      <ref bean="deployer.configuration" />
    </property>
  </bean>

  <!-- ============ PROCESSOR ============ -->

  <bean id="processor.processCheckInterval"   class="org.sapia.corus.util.PropertyImpl" p:name="corus.process.check-interval" />
  <bean id="processor.killInterval"           class="org.sapia.corus.util.PropertyImpl" p:name="corus.process.kill-interval" />
  <bean id="processor.startInterval"          class="org.sapia.corus.util.PropertyImpl" p:name="corus.process.start-interval" />
  <bean id="processor.restartInterval"        class="org.sapia.corus.util.PropertyImpl" p:name="corus.process.corus.process.restart-interval" />
  <bean id="processor.processTimeout"         class="org.sapia.corus.util.PropertyImpl" p:name="corus.process.timeout" />

  <bean id="processor.configuration" class="org.sapia.corus.admin.services.processor.ProcessorConfiguration">
    <property name="processCheckInterval" ref="processor.processCheckInterval" />
    <property name="killInterval"         ref="processor.killInterval" />
    <property name="startInterval"        ref="processor.startInterval" />
    <property name="restartInterval"      ref="processor.restartInterval" />
    <property name="processTimeout"       ref="processor.processTimeout" />
  </bean>

  <bean id="org.sapia.corus.admin.services.processor.Processor" 
        class="org.sapia.corus.processor.ProcessorImpl" 
        scope="singleton">
    <property name="configuration">
      <ref bean="processor.configuration" />
    </property>

  </bean> 

  <!-- ============ CLUSTER ============ -->

  <bean id="cluster.mcastAddress"      class="org.sapia.corus.util.PropertyImpl" p:name="corus.server.multicast.address" />
  <bean id="cluster.mcastPort"         class="org.sapia.corus.util.PropertyImpl" p:name="corus.server.multicast.port" />

  <bean id="org.sapia.corus.cluster.ClusterManager" 
        class="org.sapia.corus.cluster.ClusterManagerImpl" 
        scope="singleton">
    <property name="mcastAddress" ref="cluster.mcastAddress" />
    <property name="mcastPort"    ref="cluster.mcastPort" />
  </bean> 

  <!-- ============ JNDI ============ -->

  <bean id="org.sapia.corus.admin.services.naming.JndiModule" 
        class="org.sapia.corus.naming.JndiModuleImpl" 
        scope="singleton">
  </bean> 
  
  <!-- ============ CRON ============ -->

  <bean id="org.sapia.corus.cron.CronModule" 
        class="org.sapia.corus.cron.CronModuleImpl" 
        scope="singleton">
  </bean> 

  <!-- ============ SECURITY ============ -->

  <bean id="security.allowedHostPatterns"    class="org.sapia.corus.util.PropertyImpl" p:name="corus.server.security.hostPattern.allow" />
  <bean id="security.deniedHostPatterns"     class="org.sapia.corus.util.PropertyImpl" p:name="corus.server.security.hostPattern.deny" />

  <bean id="org.sapia.corus.security.SecurityModule" 
        class="org.sapia.corus.security.SecurityModuleImpl" 
        scope="singleton">
  </bean> 

</beans>